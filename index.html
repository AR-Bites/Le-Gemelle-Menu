<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AR Restaurant Menu</title>
  
  <!-- Preload everything for instant loading -->
  <link rel="preload" href="https://cdn.tailwindcss.com" as="script">
  <link rel="preload" href="https://unpkg.com/embla-carousel/embla-carousel.umd.js" as="script">
  <link rel="preload" href="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js" as="script">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Embla Carousel -->
  <script src="https://unpkg.com/embla-carousel/embla-carousel.umd.js"></script>
  
  <!-- Model Viewer -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <style>
    /* Optimized styles */
    model-viewer {
      --camera-orbit: 0deg 90deg 105%; /* PERFECT TOP-DOWN VIEW */
      --field-of-view: 30deg;
    }
  </style>
</head>
<body class="bg-white font-sans">
  <header class="border-b py-6">
    <div class="container mx-auto flex justify-center">
      <img src="logo-1-removebg-preview.png" alt="Logo" class="h-16 md:h-20" loading="lazy">
    </div>
  </header>

  <main class="py-8 px-4">
    <div class="container mx-auto max-w-6xl">
      <h1 class="text-3xl md:text-4xl font-bold text-center mb-3">Our Menu in AR</h1>
      <p class="text-center text-gray-600 mb-10">View dishes from above before ordering</p>
      
      <div class="carousel">
        <div class="carousel-container" id="menuCarousel">
          <!-- All dishes will load here -->
        </div>
      </div>
    </div>
  </main>

  <!-- AR Instructions -->
  <div class="fixed inset-0 bg-black bg-opacity-90 hidden items-center justify-center z-50" id="arInstructions">
    <div class="bg-white p-6 rounded-xl max-w-md mx-4">
      <h3 class="text-xl font-bold mb-4">AR Instructions</h3>
      <ol class="space-y-2 mb-6">
        <li>1. Point camera at a table</li>
        <li>2. Move slowly to detect surface</li>
        <li>3. Tap to place the dish</li>
      </ol>
      <button id="startAR" class="bg-black text-white w-full py-2 rounded-full">Start AR</button>
    </div>
  </div>

  <script>
    // COMPLETE MENU DATA (all 6 dishes)
    const menuItems = [
      {
        id: 1,
        name: "Margherita Pizza",
        description: "Tomato sauce, mozzarella, basil",
        modelUrl: "models/AR-Code-1744457119.glb",
        price: "$12.99"
      },
      {
        id: 2,
        name: "Prosciutto Pizza",
        description: "Tomato sauce, mozzarella, prosciutto",
        modelUrl: "models/AR-Code-1744457923.glb", 
        price: "$15.99"
      },
      {
        id: 3,
        name: "Truffle Pizza",
        description: "Truffle cream, mushrooms, mozzarella",
        modelUrl: "models/AR-Code-1744458351.glb",
        price: "$18.99"
      },
      {
        id: 4, 
        name: "Spicy Diavola",
        description: "Spicy salami, chili flakes, mozzarella",
        modelUrl: "models/AR-Code-1744458931.glb",
        price: "$16.99"
      },
      {
        id: 5,
        name: "4 Cheese Pizza",
        description: "Mozzarella, gorgonzola, parmesan, ricotta",
        modelUrl: "models/AR-Code-1744459414.glb",
        price: "$17.99"
      },
      {
        id: 6,
        name: "Vegetarian Pizza",
        description: "Bell peppers, mushrooms, olives, artichokes",
        modelUrl: "models/AR-Code-1744462038 (1).glb",
        price: "$15.99"
      }
    ];

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      const menuCarousel = document.getElementById('menuCarousel');
      
      // PRELOAD ALL MODELS (hidden)
      const preloadContainer = document.createElement('div');
      preloadContainer.style.display = 'none';
      document.body.appendChild(preloadContainer);
      
      // RENDER ALL DISHES WITH TOP-DOWN VIEW
      menuItems.forEach(item => {
        // Add to preload
        const preloadModel = document.createElement('model-viewer');
        preloadModel.src = item.modelUrl;
        preloadModel.setAttribute('preload', 'auto');
        preloadContainer.appendChild(preloadModel);
        
        // Create visible card
        const slide = document.createElement('div');
        slide.className = 'carousel-slide px-2';
        slide.innerHTML = `
          <div class="bg-white rounded-xl shadow-md overflow-hidden h-full">
            <model-viewer
              id="model-${item.id}"
              src="${item.modelUrl}"
              alt="${item.name}"
              ar
              camera-controls
              auto-rotate
              camera-orbit="0deg 90deg 105%" <!-- PERFECT TOP-DOWN -->
              field-of-view="30deg"
              interaction-prompt="none"
              loading="eager"
              style="height:300px; width:100%;"
            >
              <button slot="ar-button" class="absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black text-white px-4 py-2 rounded-full">
                VIEW IN AR
              </button>
            </model-viewer>
            <div class="p-4">
              <h3 class="font-bold text-xl">${item.name}</h3>
              <p class="text-gray-600 mb-2">${item.description}</p>
              <p class="font-bold text-lg">${item.price}</p>
            </div>
          </div>
        `;
        menuCarousel.appendChild(slide);
      });

      // Initialize carousel
      const embla = new EmblaCarousel(document.querySelector('.carousel'), {
        loop: true,
        align: 'center'
      });

      // AR functionality
      const arInstructions = document.getElementById('arInstructions');
      const startAR = document.getElementById('startAR');
      let currentARModel = null;

      document.querySelectorAll('model-viewer').forEach(viewer => {
        viewer.addEventListener('click', (e) => {
          if(e.target.slot === 'ar-button') {
            currentARModel = viewer;
            arInstructions.classList.remove('hidden');
            arInstructions.classList.add('flex');
          }
        });
      });

      startAR.addEventListener('click', () => {
        arInstructions.classList.add('hidden');
        if(currentARModel) currentARModel.activateAR();
      });
    });
  </script>
</body>
</html>
