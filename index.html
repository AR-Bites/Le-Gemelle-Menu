<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AR Restaurant Menu</title>
  
  <!-- Include Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Include Google's Model Viewer for 3D and AR -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  
  <!-- Include Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8f5f2;
      color: #333;
    }
    
    h1, h2, h3, h4 {
      font-family: 'Playfair Display', serif;
    }
    
    .model-viewer-container {
      width: 100%;
      height: 300px;
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin: 20px 0;
      background-color: #f5f5f5;
    }
    
    .ar-button {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #D4AF37 0%, #E8C547 100%);
      color: #1A3A2F;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      z-index: 10;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.03); }
      100% { transform: translateX(-50%) scale(1); }
    }
    
    .nav-buttons {
      position: fixed;
      bottom: 80px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 20px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(5px);
      z-index: 100;
      border-top: 1px solid rgba(0,0,0,0.1);
    }
    
    .nav-button {
      background: #1A3A2F;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: all 0.2s ease;
    }
    
    .nav-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .nav-button:active {
      transform: scale(0.98);
    }
    
    .counter {
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: #D4AF37;
      min-width: 60px;
    }
    
    .food-title {
      color: #1A3A2F;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .food-desc {
      color: #555;
      font-size: 0.95rem;
      line-height: 1.5;
    }
    
    .food-container {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin: 20px auto;
      max-width: 500px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    
    .ar-instructions {
      background: #f8f8f8;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      font-size: 0.9rem;
    }
    
    .ar-instructions ol {
      list-style-type: decimal;
      padding-left: 20px;
      margin-top: 8px;
    }
    
    .ar-instructions li {
      margin-bottom: 6px;
    }
  </style>
</head>
<body>
  <header class="w-full bg-white py-6 border-b border-gray-100">
    <div class="container mx-auto flex justify-center items-center p-2">
      <img id="logo" src="logo-1-removebg-preview.png" alt="Restaurant Logo" class="h-16 md:h-20">
    </div>
  </header>
  
  <main class="flex-grow py-8 px-4">
    <div class="container mx-auto max-w-3xl">
      <h1 class="text-3xl md:text-4xl font-bold text-center mb-3 text-[#1A3A2F]">Our Menu in 3D</h1>
      <p class="text-center text-gray-600 mb-10 max-w-xl mx-auto">Experience our dishes through augmented reality</p>
      
      <div class="food-container">
        <h2 class="food-title" id="food-title">Margherita Pizza</h2>
        <p class="food-desc" id="food-desc">San Marzano tomato sauce, fresh mozzarella, basil</p>
        
        <div class="model-viewer-container">
          <model-viewer
            id="model-viewer"
            src="models/Margherita Pizza.glb"
            ar
            ar-modes="quick-look scene-viewer webxr"
            camera-controls
            auto-rotate
            shadow-intensity="1.2"
            exposure="1.1"
            alt="3D model of Margherita Pizza"
          >
            <button slot="ar-button" class="ar-button">
              VIEW IN YOUR SPACE
            </button>
          </model-viewer>
        </div>
        
        <div class="ar-instructions">
          <p class="font-medium">How to view in AR:</p>
          <ol>
            <li>Tap "VIEW IN YOUR SPACE" button</li>
            <li>Point your camera at a flat surface</li>
            <li>Move your device slowly to detect the surface</li>
            <li>The 3D model will appear on the detected surface</li>
            <li>Pinch to resize or drag to reposition the model</li>
          </ol>
        </div>
        
        <div class="nav-buttons">
          <button id="prev-btn" class="nav-button">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
            PREV
          </button>
          <span class="counter" id="counter">1/6</span>
          <button id="next-btn" class="nav-button">
            NEXT
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Menu data with 3D model links
    const menuItems = [
      {
        title: "Margherita Pizza",
        description: "San Marzano tomato sauce, fresh mozzarella, basil",
        model: "models/Margherita Pizza.glb"
      },
      {
        title: "Pepperoni Pizza",
        description: "Pepperoni, mozzarella, tomato sauce",
        model: "models/Pepperoni Pizza.glb"
      },
      {
        title: "Fettuccine Alfredo",
        description: "Handmade pasta, black truffle, parmesan cream",
        model: "models/Fettuccine Alfredo.glb"
      },
      {
        title: "Pesto Pasta",
        description: "Basil pesto, pine nuts, aged parmesan",
        model: "models/Pesto Pasta.glb"
      },
      {
        title: "Rose Pasta",
        description: "Creamy tomato sauce, permesan cheese, basil",
        model: "models/Rose Pasta.glb"
      },
      {
        title: "Sea Food Pasta",
        description: "Mix of sea food with spaghiti",
        model: "models/Sea Food Pasta.glb"
      }
    ];
    
    // DOM elements
    const modelViewer = document.getElementById('model-viewer');
    const foodTitle = document.getElementById('food-title');
    const foodDesc = document.getElementById('food-desc');
    const counter = document.getElementById('counter');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    
    let currentIndex = 0;
    
    // Update the displayed model
    function updateModel() {
      const food = menuItems[currentIndex];
      
      // First reset the model-viewer
      modelViewer.removeAttribute('src');
      modelViewer.loading = 'eager';
      
      // Set the new model after a small delay to ensure reset
      setTimeout(() => {
        modelViewer.src = food.model;
        modelViewer.setAttribute('alt', `3D model of ${food.title}`);
        
        // Force reload the model
        if (modelViewer.model) {
          modelViewer.model.visible = false;
          setTimeout(() => {
            modelViewer.model.visible = true;
          }, 100);
        }
      }, 50);
      
      foodTitle.textContent = food.title;
      foodDesc.textContent = food.description;
      counter.textContent = `${currentIndex + 1}/${menuItems.length}`;
      
      // Disable buttons at boundaries
      prevBtn.disabled = currentIndex === 0;
      nextBtn.disabled = currentIndex === menuItems.length - 1;
    }
    
    // Event listeners for navigation
    prevBtn.addEventListener('click', () => {
      if (currentIndex > 0) {
        currentIndex--;
        updateModel();
      }
    });
    
    nextBtn.addEventListener('click', () => {
      if (currentIndex < menuItems.length - 1) {
        currentIndex++;
        updateModel();
      }
    });
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      updateModel();
      
      // Set the restaurant logo
      document.getElementById('logo').src = 'logo-1-removebg-preview.png';
      
      // Ensure model-viewer is properly initialized
      customElements.whenDefined('model-viewer').then(() => {
        console.log('model-viewer is defined');
      });
    });
  </script>
</body>
</html>
